name: Merge Macro Bundleon:workflow_dispatch:inputs:target_minutes:description: 'Target duration (minutes)'required: truedefault: '25'versions_per_folder:description: 'Versions per folder'required: truedefault: '6'delay_before_action_ms:description: 'Delay Before Action MS (0 to disable)'required: truedefault: '10'jobs:merge-macros:runs-on: ubuntu-lateststeps:- name: Checkout codeuses: actions/checkout@v4with:fetch-depth: 0  - name: Set up Python
    uses: actions/setup-python@v4
    with:
      python-version: '3.x'

  - name: Run Merge Script
    run: |
      python3 merge_macros.py \
        "input_macros" \
        "output_bundles" \
        --target-minutes ${{ github.event.inputs.target_minutes }} \
        --versions ${{ github.event.inputs.versions_per_folder }} \
        --delay-before-action-ms ${{ github.event.inputs.delay_before_action_ms }}

  - name: Commit and Push changes
    run: |
      git config --global user.name "github-actions[bot]"
      git config --global user.email "github-actions[bot]@users.noreply.github.com"
      git add .github/merge_bundle_counter.txt
      git add output_bundles/
      git commit -m "Generated Merge Bundle #$(cat .github/merge_bundle_counter.txt)" || echo "No changes to commit"
      git push
